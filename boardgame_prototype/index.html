<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paleo-Maiden Championship: Board Game Prototype</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="../css/music_styling.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;700&family=Lato:wght@400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <audio id="bg-music" src="../src/sailon.mp3" autoplay loop></audio>

    <div id="notification-container"></div>

    <main class="game-container">
        <header class="game-header">
            <nav class="breadcrumb">
                <a href="../index.html">&larr; Back to Home</a>
            </nav>
            <h1>The Great Expedition</h1>

            <div class="game-actions-bar">
                <div class="game-info">
                    <p>Year: <span id="year-display">1</span></p>
                    <p>Turn: <span id="turn-display">1</span> / 24</p>
                </div>
                <button id="roll-dice-btn">Roll Dice</button>
                <p class="dice-display">Roll: <span id="dice-result">-</span></p>
                <button id="toggle-ids-btn" class="debug-btn">Hide IDs</button>
            </div>
        </header>

        <!-- New Container for Game Actions -->
        <div class="game-actions-container">


            <div id="game-board">
                <div id="player-token"></div>
                <svg id="connections-layer" width="100%" height="100%">
                    <defs></defs>
                </svg>
                <div id="grid-overlay"></div>
                <!-- Game spaces will be generated by JavaScript -->
            </div>

            <div id="mechanics-guide-container">
                <!-- Game Mechanics Info Panel -->
                <div id="mechanics-panel" class="active">
                    <div class="panel-header">
                        <h3>‚ò∞ Mechanics Guide</h3>
                    </div>
                    <div class="panel-content">
                        <h4>Expedition Camp Actions</h4>
                        <div class="mechanic-entry">
                            <strong>Train:</strong> Learn a specialized Disicpline Technique based on your Maiden. Cost
                            varies by biome.
                            <ul id="train-cost-list">
                                <!-- JS will populate this -->
                            </ul>
                        </div>
                        <div class="mechanic-entry">
                            <strong>Forage:</strong> Spend P-Magic to find ingredients and potentially techniques.
                            <ul>
                                <li><strong>Lush Biomes (Plains, Forest, Coastal):</strong> 10 P-Magic for 2-4
                                    ingredients.
                                    20% chance of technique.</li>
                                <li><strong>Harsh Biomes (Desert, Tundra, Volcanic, Mountain):</strong> 20 P-Magic for
                                    1-2
                                    ingredients. 50% chance of technique.</li>
                            </ul>
                        </div>
                        <div class="mechanic-entry"><strong>Cook:</strong> Use 2 Ingredients to restore 25 P-Magic and
                            gain
                            5 Maiden Affinity.</div>
                        <div class="mechanic-entry"><strong>Barter:</strong> Trade 1 Ingredient now to receive 1
                            Ingredient
                            next turn. (Free action within camp).</div>

                        <h4>Crossroads Events</h4>
                        <div class="mechanic-entry">
                            A chance encounter with a rival. These are free actions that do not end your turn's camping
                            opportunity.
                            <ul>
                                <li><strong>Interact:</strong> Learn a random Paleo Art of the rival's discipline.</li>
                                <li><strong>Challenge:</strong> Initiate combat. Redirects you to the combat screen.
                                </li>
                                <li><strong>Leave:</strong> Continue on your way.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="status-menu-container" class="active">
                <button id="ui-toggle-btn">
                    <svg class="move-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <polyline points="5 9 2 12 5 15"></polyline>
                        <polyline points="9 5 12 2 15 5"></polyline>
                        <polyline points="15 19 12 22 9 19"></polyline>
                        <polyline points="19 9 22 12 19 15"></polyline>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <line x1="12" y1="2" x2="12" y2="22"></line>
                    </svg>
                    Status Menu
                </button>
                <div id="ui-panel">
                    <div class="character-header">
                        <img src="src/portrait.png" alt="Sastrei Taurus Portrait" class="character-portrait">
                        <h3>Sastrei Taurus</h3>
                        <div class="status-item">
                            <label>Discipline:</label>
                            <div id="discipline-display">
                                <span id="discipline-name" class="tech-count">None</span>
                            </div>
                        </div>
                    </div>
                    <div class="status-item">
                        <label>Techniques Learned:</label>
                        <div id="technique-counts">
                            <div class="tech-count brute">Brt: <span id="brute-count">0</span></div>
                            <div class="tech-count focus">Foc: <span id="focus-count">0</span></div>
                            <div class="tech-count flow">Flw: <span id="flow-count">0</span></div>
                            <div class="tech-count control">Ctrl: <span id="control-count">0</span></div>
                        </div>
                    </div>

                    <div class="status-item">
                        <label for="pmagic-bar">P-Magic:</label>
                        <div class="pmagic-bar-container">
                            <div id="pmagic-bar" style="width: 100%;"></div>
                            <span id="pmagic-value">100 / 100</span>
                        </div>
                    </div>
                    <div class="status-item">
                        <label for="affinity-bar">Maiden Affinity:</label>
                        <div class="affinity-bar-container">
                            <div id="affinity-bar" style="width: 0%;"></div>
                            <span id="affinity-value">0 / 100</span>
                        </div>
                    </div>
                    <div class="status-item">
                        <label>Inventory:</label>
                        <div id="inventory-display">
                            <span>Ingredients: <span id="ingredient-count">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
    </main>


    <div class="volume-control-container">
        <div class="now-playing-container">
            <span id="now-playing" class="now-playing-text">Now Playing: Jump Ultimate Stars OST - Sail On</span>
        </div>
        <div class="volume-controls">
            <button id="play-pause-btn" class="control-btn">‚ùö‚ùö</button>
            <button id="mute-btn" class="control-btn">üîä</button>
            <span class="volume-label">Music Volume</span>
            <input type="range" id="volume-slider" min="0" max="100" value="30">
        </div>
    </div>

    <!-- Expedition Camp Modal -->
    <div id="expedition-camp-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Expedition Camp</h2>
            <p>You make camp in the wilderness. The air is still and the fire crackles softly. What will you do?</p>
            <div class="modal-actions">
                <button data-action="train">Train</button>
                <button data-action="forage">Forage</button>
                <button data-action="cook">Cook</button>
                <button data-action="barter">Barter</button>
            </div>
        </div>
    </div>

    <!-- Title Match Modal -->
    <div id="title-match-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="title-match-name">Title Match</h2>
            <p>Choose your opponent for the title match!</p>
            <div id="title-match-aspirants" class="modal-actions">
                <!-- Aspirants will be dynamically inserted here -->
            </div>
            <div class="modal-actions" style="margin-top: 2rem;">
                <button data-action="leave">Leave</button>
            </div>
        </div>
    </div>

    <!-- Crossroads Modal -->
    <div id="crossroads-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="crossroads-title">A Rival Appears!</h2>
            <div id="crossroads-rival-display">
                <!-- Rival info will be injected here by JS -->
            </div>
            <p id="crossroads-message">You've crossed paths with another Maiden. What will you do?</p>
            <div class="modal-actions">
                <button data-action="interact">Interact (Free)</button>
                <button data-action="challenge">Challenge (Free)</button>
                <button data-action="leave">Leave</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="../js/music-player.js"></script>

</body>

</html>